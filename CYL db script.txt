CREATE DATABASE CYL;
USE CYL;

CREATE
  TABLE CYL.CHAPTER
  (
    CH_ID       INTEGER NOT NULL AUTO_INCREMENT ,
    CH_NAME     VARCHAR (35) ,
    CH_LOCATION VARCHAR (35) ,
    CH_DIRECTOR VARCHAR (25) ,
    CO_ID       INTEGER NOT NULL ,
CONSTRAINT CH_PK PRIMARY KEY ( CH_ID )
  ) ;
CREATE UNIQUE INDEX CHAPTER__IDX ON CYL.CHAPTER
  (
    CH_ID ASC
  )
  ;
  CREATE
    INDEX CHAPTER__IDXv1 ON CYL.CHAPTER
    (
      CO_ID ASC
    ) ;

CREATE
  TABLE CYL.CHAPTER_THEME
  (
    CT_START_DATE DATE NOT NULL ,
    CT_END_DATE   DATE ,
    CH_ID         INTEGER NOT NULL ,
    THEME_ID      INTEGER NOT NULL
  ) ;
CREATE UNIQUE INDEX CHAPTER_THEME__IDX ON CYL.CHAPTER_THEME
  (
    CT_START_DATE ASC , CH_ID ASC , THEME_ID ASC
  )
  ;
  CREATE
    INDEX CHAPTER_THEME__IDXv1 ON CYL.CHAPTER_THEME
    (
      CH_ID ASC ,
      THEME_ID ASC
    ) ;
  ALTER TABLE CYL.CHAPTER_THEME ADD CONSTRAINT CT_PK PRIMARY KEY (
  CT_START_DATE, CH_ID, THEME_ID ) ;

CREATE
  TABLE CYL.COUNTY
  (
    CO_ID   INTEGER NOT NULL AUTO_INCREMENT ,
    CO_NAME VARCHAR (25) ,
    ST_ID   INTEGER NOT NULL ,
CONSTRAINT CO_PK PRIMARY KEY ( CO_ID )
  ) ;
CREATE UNIQUE INDEX COUNTY__IDX ON CYL.COUNTY
  (
    CO_ID ASC
  )
  ;
  CREATE
    INDEX COUNTY__IDXv1 ON CYL.COUNTY
    (
      ST_ID ASC
    ) ;

CREATE
  TABLE CYL.ROLE
  (
    ROLE_ID   INTEGER NOT NULL AUTO_INCREMENT ,
    ROLE_NAME VARCHAR (25) ,
CONSTRAINT ROLE_PK PRIMARY KEY ( ROLE_ID )
  ) ;
CREATE UNIQUE INDEX ROLE__IDX ON CYL.ROLE
  (
    ROLE_ID ASC
  )
  ;

CREATE
  TABLE CYL.STATE
  (
    ST_ID   INTEGER NOT NULL AUTO_INCREMENT ,
    ST_NAME VARCHAR (25) ,
CONSTRAINT ST_PK PRIMARY KEY ( ST_ID )
  ) ;
CREATE UNIQUE INDEX STATE__IDX ON CYL.STATE
  (
    ST_ID ASC
  )
  ;

CREATE
  TABLE CYL.STUDENT
  (
    USER_ID INTEGER NOT NULL ,
    CH_ID   INTEGER NOT NULL
  ) ;
CREATE UNIQUE INDEX STUDENT__IDX ON CYL.STUDENT
  (
    USER_ID ASC
  )
  ;
  CREATE
    INDEX STUDENT__IDXv1 ON CYL.STUDENT
    (
      CH_ID ASC
    ) ;
  ALTER TABLE CYL.STUDENT ADD CONSTRAINT STUDENT_PK PRIMARY KEY ( USER_ID ) ;

CREATE
  TABLE CYL.STUDENT_SUMMIT
  (
    USER_ID           INTEGER NOT NULL ,
    SUMMIT_ID         INTEGER NOT NULL ,
    SS_REVIEW_DATE    DATE ,
    SS_REVIEW_SIGNOFF VARCHAR (35)
  ) ;
CREATE UNIQUE INDEX STUDENT_SUMMIT__IDX ON CYL.STUDENT_SUMMIT
  (
    USER_ID ASC , SUMMIT_ID ASC
  )
  ;
  CREATE
    INDEX STUDENT_SUMMIT__IDXv1 ON CYL.STUDENT_SUMMIT
    (
      USER_ID ASC ,
      SUMMIT_ID ASC
    ) ;
  ALTER TABLE CYL.STUDENT_SUMMIT ADD CONSTRAINT SS_PK PRIMARY KEY ( USER_ID,
  SUMMIT_ID ) ;

CREATE
  TABLE CYL.STUDENT_TASK_THEME
  (
    STT_START_DATE            DATE ,
    STT_END_DATE              DATE ,
    STT_REVIEW_DATE           DATE ,
    STT_REVIEW_SIGNOFF_PERSON VARCHAR (35) ,
    STT_VOLUNTEER_HOURS       NUMERIC (4,2) ,
    STT_MEETING_COUNT         NUMERIC (3) ,
    USER_ID                   INTEGER NOT NULL ,
    THEME_ID                  INTEGER NOT NULL ,
    TASK_ID                   INTEGER NOT NULL
  ) ;
CREATE UNIQUE INDEX STUDENT_TASK_THEME__IDX ON CYL.STUDENT_TASK_THEME
  (
    THEME_ID ASC , USER_ID ASC , TASK_ID ASC
  )
  ;
  CREATE
    INDEX STUDENT_TASK_THEME__IDXv1 ON CYL.STUDENT_TASK_THEME
    (
      THEME_ID ASC ,
      USER_ID ASC ,
      TASK_ID ASC
    ) ;
  ALTER TABLE CYL.STUDENT_TASK_THEME ADD CONSTRAINT STT_PK PRIMARY KEY (
  USER_ID, THEME_ID, TASK_ID ) ;

CREATE
  TABLE CYL.STUDENT_THEME_SUMMIT
  (
    USER_ID           INTEGER NOT NULL ,
    THEME_ID          INTEGER NOT NULL ,
    SUMMIT_ID         INTEGER NOT NULL ,
    STS_COMPLETE_DATE DATE
  ) ;
CREATE UNIQUE INDEX STUDENT_THEME_SUMMIT__IDX ON CYL.STUDENT_THEME_SUMMIT
  (
    THEME_ID ASC , SUMMIT_ID ASC , USER_ID ASC
  )
  ;
  CREATE
    INDEX STUDENT_THEME_SUMMIT__IDXv1 ON CYL.STUDENT_THEME_SUMMIT
    (
      SUMMIT_ID ASC ,
      THEME_ID ASC ,
      USER_ID ASC
    ) ;
  ALTER TABLE CYL.STUDENT_THEME_SUMMIT ADD CONSTRAINT STS_PK PRIMARY KEY (
  THEME_ID, SUMMIT_ID, USER_ID ) ;

CREATE
  TABLE CYL.SUMMIT
  (
    SUMMIT_ID     INTEGER NOT NULL AUTO_INCREMENT ,
    SUMMIT_NUMBER INTEGER ,
    SUMMIT_NAME   VARCHAR (25) ,
CONSTRAINT SUMMIT_PK PRIMARY KEY ( SUMMIT_ID )
  ) ;
CREATE UNIQUE INDEX SUMMIT__IDX ON CYL.SUMMIT
  (
    SUMMIT_ID ASC
  )
  ;

CREATE
  TABLE CYL.TASK
  (
    TASK_ID   INTEGER NOT NULL AUTO_INCREMENT ,
    TASK_NAME VARCHAR (35) ,
    TASK_DESC VARCHAR (100) ,
CONSTRAINT TASK_PK PRIMARY KEY ( TASK_ID )
  ) ;
CREATE UNIQUE INDEX TASK__IDX ON CYL.TASK
  (
    TASK_ID ASC
  )
  ;

CREATE
  TABLE CYL.TASK_THEME
  (
    THEME_ID           INTEGER NOT NULL ,
    TASK_ID            INTEGER NOT NULL ,
    TT_MEETING_COUNT   NUMERIC (3) ,
    TT_VOLUNTEER_HOURS NUMERIC (4,2)
  ) ;
CREATE UNIQUE INDEX TASK_THEME__IDX ON CYL.TASK_THEME
  (
    THEME_ID ASC , TASK_ID ASC
  )
  ;
  CREATE
    INDEX TASK_THEME__IDXv1 ON CYL.TASK_THEME
    (
      THEME_ID ASC ,
      TASK_ID ASC
    ) ;
  ALTER TABLE CYL.TASK_THEME ADD CONSTRAINT TT_PK PRIMARY KEY ( THEME_ID,
  TASK_ID ) ;

CREATE
  TABLE CYL.THEME
  (
    THEME_ID     INTEGER NOT NULL AUTO_INCREMENT ,
    THEME_NUMBER INTEGER ,
    THEME_NAME   VARCHAR (35) ,
    THEME_DESC   VARCHAR (100) ,
CONSTRAINT THEME_PK PRIMARY KEY ( THEME_ID )
  ) ;
CREATE UNIQUE INDEX THEME__IDX ON CYL.THEME
  (
    THEME_ID ASC
  )
  ;

CREATE
  TABLE CYL.THEME_SUMMIT
  (
    SUMMIT_ID        INTEGER NOT NULL ,
    THEME_ID         INTEGER NOT NULL ,
    TS_COMPLETE_DATE DATE
  ) ;
CREATE UNIQUE INDEX THEME_SUMMIT__IDX ON CYL.THEME_SUMMIT
  (
    THEME_ID ASC , SUMMIT_ID ASC
  )
  ;
  CREATE
    INDEX THEME_SUMMIT__IDXv1 ON CYL.THEME_SUMMIT
    (
      THEME_ID ASC ,
      SUMMIT_ID ASC
    ) ;
  ALTER TABLE CYL.THEME_SUMMIT ADD CONSTRAINT TS_PK PRIMARY KEY ( THEME_ID,
  SUMMIT_ID ) ;

CREATE
  TABLE CYL.USER
  (
    USER_ID    INTEGER NOT NULL AUTO_INCREMENT ,
    USER_NAME  VARCHAR (25) ,
    USER_PWD   CHAR (9) ,
    USER_FNAME VARCHAR (15) ,
    USER_LNAME VARCHAR (15) ,
    USER_MI    CHAR (1) ,
CONSTRAINT USER_PK PRIMARY KEY ( USER_ID )
  ) ;
CREATE UNIQUE INDEX USER__IDX ON CYL.USER
  (
    USER_ID ASC
  )
  ;

CREATE
  TABLE CYL.USER_ROLE
  (
    USER_ID INTEGER NOT NULL ,
    ROLE_ID INTEGER NOT NULL
  ) ;
CREATE UNIQUE INDEX USER_ROLE__IDX ON CYL.USER_ROLE
  (
    USER_ID ASC , ROLE_ID ASC
  )
  ;
  CREATE
    INDEX USER_ROLE__IDXv1 ON CYL.USER_ROLE
    (
      USER_ID ASC ,
      ROLE_ID ASC
    ) ;
  ALTER TABLE CYL.USER_ROLE ADD CONSTRAINT USER_ROLE_PK PRIMARY KEY ( USER_ID
  , ROLE_ID ) ;

ALTER TABLE CYL.CHAPTER ADD CONSTRAINT CHAPTER_COUNTY_FK FOREIGN KEY ( CO_ID
) REFERENCES CYL.COUNTY ( CO_ID ) ON DELETE RESTRICT ON UPDATE CASCADE ;

ALTER TABLE CYL.CHAPTER_THEME ADD CONSTRAINT CHAPTER_THEME_CHAPTER_FK FOREIGN
KEY ( CH_ID ) REFERENCES CYL.CHAPTER ( CH_ID ) ON DELETE RESTRICT ON UPDATE CASCADE ;

ALTER TABLE CYL.CHAPTER_THEME ADD CONSTRAINT CHAPTER_THEME_THEME_FK FOREIGN
KEY ( THEME_ID ) REFERENCES CYL.THEME ( THEME_ID ) ON DELETE RESTRICT ON UPDATE CASCADE ;

ALTER TABLE CYL.COUNTY ADD CONSTRAINT COUNTY_STATE_FK FOREIGN KEY ( ST_ID )
REFERENCES CYL.STATE ( ST_ID ) ON DELETE RESTRICT ON UPDATE CASCADE ;

ALTER TABLE CYL.STUDENT ADD CONSTRAINT STUDENT_CHAPTER_FK FOREIGN KEY ( CH_ID
) REFERENCES CYL.CHAPTER ( CH_ID ) ON DELETE RESTRICT ON UPDATE CASCADE ;

ALTER TABLE CYL.STUDENT_SUMMIT ADD CONSTRAINT STUDENT_SUMMIT_STUDENT_FK
FOREIGN KEY ( USER_ID ) REFERENCES CYL.STUDENT ( USER_ID ) ON DELETE RESTRICT ON UPDATE CASCADE ;

ALTER TABLE CYL.STUDENT_SUMMIT ADD CONSTRAINT STUDENT_SUMMIT_SUMMIT_FK
FOREIGN KEY ( SUMMIT_ID ) REFERENCES CYL.SUMMIT ( SUMMIT_ID ) ON DELETE RESTRICT ON UPDATE CASCADE ;

ALTER TABLE CYL.STUDENT ADD CONSTRAINT STUDENT_USER_FK FOREIGN KEY ( USER_ID
) REFERENCES CYL.USER ( USER_ID ) ON DELETE RESTRICT ON UPDATE CASCADE ;

ALTER TABLE CYL.STUDENT_TASK_THEME ADD CONSTRAINT STU_TASK_THEME_STUDENT_FK
FOREIGN KEY ( USER_ID ) REFERENCES CYL.STUDENT ( USER_ID ) ON DELETE RESTRICT ON UPDATE CASCADE ;

ALTER TABLE CYL.STUDENT_TASK_THEME ADD CONSTRAINT
STU_TASK_THEME_TASK_THEME_FK FOREIGN KEY ( THEME_ID, TASK_ID ) REFERENCES
CYL.TASK_THEME ( THEME_ID, TASK_ID ) ON DELETE RESTRICT ON UPDATE CASCADE ;

ALTER TABLE CYL.STUDENT_THEME_SUMMIT ADD CONSTRAINT
STU_THEME_SUMMIT_STUDENT_FK FOREIGN KEY ( USER_ID ) REFERENCES CYL.STUDENT (
USER_ID ) ON DELETE RESTRICT ON UPDATE CASCADE ;

ALTER TABLE CYL.STUDENT_THEME_SUMMIT ADD CONSTRAINT
STU_THM_SUMMIT_THM_SUMMIT_FK FOREIGN KEY ( THEME_ID, SUMMIT_ID ) REFERENCES
CYL.THEME_SUMMIT ( THEME_ID, SUMMIT_ID ) ON DELETE RESTRICT ON UPDATE CASCADE ;

ALTER TABLE CYL.TASK_THEME ADD CONSTRAINT TASK_THEME_TASK_FK FOREIGN KEY (
TASK_ID ) REFERENCES CYL.TASK ( TASK_ID ) ON DELETE RESTRICT ON UPDATE CASCADE ;

ALTER TABLE CYL.TASK_THEME ADD CONSTRAINT TASK_THEME_THEME_FK FOREIGN KEY (
THEME_ID ) REFERENCES CYL.THEME ( THEME_ID ) ON DELETE RESTRICT ON UPDATE CASCADE ;

ALTER TABLE CYL.THEME_SUMMIT ADD CONSTRAINT THEME_SUMMIT_SUMMIT_FK FOREIGN
KEY ( SUMMIT_ID ) REFERENCES CYL.SUMMIT ( SUMMIT_ID ) ON DELETE RESTRICT ON UPDATE CASCADE ;

ALTER TABLE CYL.THEME_SUMMIT ADD CONSTRAINT THEME_SUMMIT_THEME_FK FOREIGN KEY
( THEME_ID ) REFERENCES CYL.THEME ( THEME_ID ) ON DELETE RESTRICT ON UPDATE CASCADE ;

ALTER TABLE CYL.USER_ROLE ADD CONSTRAINT USER_ROLE_ROLE_FK FOREIGN KEY (
ROLE_ID ) REFERENCES CYL.ROLE ( ROLE_ID ) ON DELETE RESTRICT ON UPDATE CASCADE ;

ALTER TABLE CYL.USER_ROLE ADD CONSTRAINT USER_ROLE_USER_FK FOREIGN KEY (
USER_ID ) REFERENCES CYL.USER ( USER_ID ) ON DELETE RESTRICT ON UPDATE CASCADE ;